#+TITLE: Emacs Recovery System Review and Recommendations
#+DATE: 2025-12-31
#+DESCRIPTION: Audit of current recovery paths and suggested improvements

* Scope

Focus: what to do when Emacs will not launch or errors during startup. Reviewed =docs/recovery-guide.org=, =docs/backup-system.org=, and =minimal-init.el=.

* Current Recovery Assets (What Works)

- Layered escalation path in =docs/recovery-guide.org= (debug-init → disable config → nuke packages → bypass Spacemacs → re-clone Spacemacs).
- Minimal escape hatch in =minimal-init.el= (no packages, safe editing environment).
- Backup layers in =docs/backup-system.org= (per-save, per-session, git history, Time Machine).
- Batch sanity checks (check-parens, byte-compile) to avoid GUI startup.
- Spacemacs core separate from config via symlinked =~/.emacs.d=.

* Observed Symlink Map (Current State)

#+begin_example
~/.emacs.d    -> /Users/jay/emacs/spacemacs
~/.spacemacs  -> /Users/jay/starship/init.el
/Users/jay/starship -> /Users/jay/emacs/emacs-settings/spacemacs.d
~/.spacemacs.d -> /Users/jay/emacs/emacs-settings/spacemacs.d
#+end_example

* Recommendations (Priority Order)

1. *Align recovery docs with the canonical config path and symlink map.*
   - Canonical config file: =/Users/jay/emacs/emacs-settings/spacemacs.d/init.el=.
   - In the Level 2 "bypass config" step and Quick Reference, explicitly mention renaming both =~/.spacemacs= and =~/.spacemacs.d=.
   - Document the =/Users/jay/starship= symlink chain once so the path story is unambiguous.

2. *Remove or implement the =nuclear-recovery.sh= reference.*
   - If the script does not exist, delete the reference to avoid dead instructions.
   - If you want it, implement a script that:
     - backs up =~/emacs/emacs-settings=
     - deletes =~/.emacs.d/elpa=
     - prints the symlink map for verification

3. *Add a one-command safe launch alias/script.*
   - Example alias:
     #+begin_src sh
     alias emacs-min='emacs -Q -l ~/emacs/emacs-settings/minimal-init.el'
     #+end_src
   - Optional: =scripts/emacs-safe.sh= that prints symlinks and launches minimal-init.

4. *Add a "symlink health check" snippet to recovery docs.*
   - Example:
     #+begin_src sh
     ls -ld ~/.emacs.d ~/.spacemacs ~/.spacemacs.d /Users/jay/starship
     #+end_src
   - This is the fastest way to catch miswired entrypoints after recovery.

5. *Keep a two-command triage checklist at the top of the recovery guide.*
   - =emacs --debug-init=
   - =emacs --batch /Users/jay/emacs/emacs-settings/spacemacs.d/init.el --eval '(check-parens)'=

* Notes

- For package-level failures, nuking =~/.emacs.d/elpa= is the fastest fix and does not touch config.
- For config-level failures, =minimal-init.el= provides a clean environment to repair files without reshuffling symlinks.
- The current minimal init is intentionally dependency-free; keep it small and stable.
